---
title: "Google Tag Managerを使いつつGAのコンバージョンを確認できるようにする"
date: "2021-04-07"
category: "work"
---

## Google Analytics のコンバージョンとは

Google Analytics のコンバージョンの機能を使えば、資料請求が何件あったか・何人が新規登録したかなど、サイト内で計測したい指標を追うことができます。
コンバージョンの設定には「到達ページ」「滞在時間」「イベント」などの測定方法があります。
![](img1.png)

このうちイベント以外の項目はここで設定が完結しますが、イベントに関しては色々設定を加えなくてはいけません。大きく以下の 2 つのやり方があります。

- Google Tag Manager を使う
- gtag.js を使う

## 前提

Rails アプリで新たにユーザが登録したタイミングで、コンバージョンを走らせます。
GA の「目標」設定は下記のように設定していると仮定します。

- タイプ: イベント
- カテゴリ: user
- アクション: registration

## Google Tag Manager(GTM) を使う

GTM を使う方が gtag.js を使うより実装の変更を最小限に留められます。
カテゴリー、アクションを上記で設定した内容と同じにします。こうすることでトリガーでタグの内容が実行されてコンバージョンがカウントされるようになります。

## gtag.js を使う

繰り返しですが Google Tag Manager を使う方が実装に依存しなくなります。
